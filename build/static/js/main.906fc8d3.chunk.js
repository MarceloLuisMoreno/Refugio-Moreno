(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{113:function(e,t,c){},114:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),s=c(33),r=c.n(s),i=c(18),o=c(19),l=c(4),j=c(10),d=c(116),b=c(117),m=c(118),u=c(73),O=(c(77),u.a.initializeApp({apiKey:"AIzaSyCBQ_wQx8ja-WbYHZAAOOXlx-UY9JO7J9c",authDomain:"refugio-ecommerce.firebaseapp.com",projectId:"refugio-ecommerce",storageBucket:"refugio-ecommerce.appspot.com",messagingSenderId:"471407983104",appId:"1:471407983104:web:03590b2b10cc199191b6e5"}));function x(){return u.a.firestore(O)}var h=c(124),p=c(71),f=c.n(p),g=c(2);var v=function(e){var t=e.item;return Object(g.jsx)("div",{className:"container col",children:Object(g.jsx)(f.a,{children:Object(g.jsxs)(h.a,{style:{width:"16rem"},className:"mt-5 shadow p-3 mb-5 bg-white rounded",children:[Object(g.jsx)(i.b,{to:"/item/".concat(t.id),children:Object(g.jsx)(h.a.Img,{variant:"top",src:t.image})}),Object(g.jsxs)(h.a.Body,{children:[Object(g.jsxs)(h.a.Title,{className:"text-center fs-6",children:["Id: ",t.id]}),Object(g.jsx)(h.a.Title,{className:"text-center",children:t.name}),Object(g.jsxs)(h.a.Title,{className:"text-center",children:["$ ",t.price]}),Object(g.jsx)(i.b,{to:"/item/".concat(t.id),children:Object(g.jsx)("button",{className:"btn btn-success btn-sm",children:"+ Info"})}),Object(g.jsxs)(h.a.Title,{className:"text-center m-2",children:["Stock ",t.stock]})]})]})})})};var y=function(e){var t=e.items;return Object(g.jsx)(g.Fragment,{children:t.map((function(e){return Object(g.jsx)(v,{item:e},e.id)}))})};var N=function(){var e=Object(o.f)().categoryId,t=Object(a.useState)([]),c=Object(j.a)(t,2),n=c[0],s=c[1],r=Object(a.useState)(!0),i=Object(j.a)(r,2),u=i[0],O=i[1];return Object(a.useEffect)((function(){"todos"===e?x().collection("items").orderBy("category","asc").orderBy("name").get().then((function(e){return s(e.docs.map((function(e){return Object(l.a)({id:e.id},e.data())})))})).catch((function(e){return alert("Error: ".concat(e))})).finally((function(){return O(!1)})):x().collection("items").where("category","==",e).orderBy("name").get().then((function(e){return s(e.docs.map((function(e){return Object(l.a)({id:e.id},e.data())})))})).catch((function(e){return alert("Upss!! Error: ".concat(e))})).finally((function(){return O(!1)}))}),[e]),Object(g.jsxs)(d.a,{children:[Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsxs)("h2",{className:"mt-5",children:["Nuestros productos - ",e.toUpperCase()]}),u?Object(g.jsxs)(b.a,{className:"m-5",variant:"success",disabled:!0,children:[Object(g.jsx)(m.a,{as:"span",animation:"border",role:"status","aria-hidden":"true",size:"lg"}),"L O A D I N G ..."]}):Object(g.jsx)("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-2 row-cols-lg-4 row-cols-xxl-4 mb-5 text-center",children:Object(g.jsx)(y,{items:n})})]})},C=c(122),k=c(120),I=c(53),w=Object(a.createContext)([]),S=function(){return Object(a.useContext)(w)},A=function(e){var t=e.children,c=Object(a.useState)([]),n=Object(j.a)(c,2),s=n[0],r=n[1];return Object(g.jsx)(w.Provider,{value:{cartList:s,addItem:function(e){var t=Object(I.a)(s);void 0!==t.find((function(t){return t.id===e.item.id}))?(t.find((function(t){return t.id===e.item.id})).quantity+=e.quantity,r(t)):r([].concat(Object(I.a)(s),[Object(l.a)(Object(l.a)({},e.item),{},{quantity:e.quantity})]))},itemsCarrito:function(){return s.reduce((function(e,t){return e+t.quantity}),0)},clearCart:function(){r([])},totalCart:function(){return s.reduce((function(e,t){return e+t.quantity*t.price}),0)},clearItem:function(e){r(s.filter((function(t){return t.id!==e})))}},children:t})},T=c(84),F=c.n(T);var P=function(){var e=S().itemsCarrito;return Object(g.jsx)(F.a,{spy:e(),children:Object(g.jsx)("div",{className:"bi bi-cart4 fs-4 text-secondary text-decoration-none",children:" "+e()})})};var E=function(){return Object(g.jsx)(C.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",fixed:"top",children:Object(g.jsxs)(d.a,{children:[Object(g.jsx)(i.b,{to:"/",children:Object(g.jsx)("img",{src:"/refugio.png",className:"nav-link d-inline-block align-top mx-5 ps-5",alt:"Refugio Tienda Deco logo"})}),Object(g.jsx)(C.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(g.jsx)(C.a.Collapse,{id:"responsive-navbar-nav",children:Object(g.jsxs)(k.a,{className:"me-auto",children:[Object(g.jsx)(i.b,{className:"nav-link",to:"/",children:"Home"}),Object(g.jsx)(i.b,{className:"nav-link",to:"/category/todos",children:"Productos"}),Object(g.jsx)(i.b,{className:"nav-link",to:"/category/cuadros",children:"Cuadros"}),Object(g.jsx)(i.b,{className:"nav-link",to:"/category/macetas",children:"Macetas"}),Object(g.jsx)(i.b,{className:"nav-link",to:"/category/plantas",children:"Plantas"}),Object(g.jsx)(i.b,{className:"nav-link",to:"/category/vinilos",children:"Vinilos"})]})}),Object(g.jsx)(i.b,{to:"/cart",className:"nav-link ms-5 ps-5",children:Object(g.jsx)(P,{})})]})})},q=c(86),D=c.n(q);var R=function(e){var t=e.stock,c=e.initial,n=e.onAdd,s=Object(a.useState)(c),r=Object(j.a)(s,2),i=r[0],o=r[1];return Object(g.jsxs)("div",{children:[Object(g.jsx)(b.a,{onClick:function(){return o(i-1)},variant:"light",size:"lg",className:"bi bi-dash-circle-fill",disabled:1===i}),Object(g.jsx)(D.a,{spy:i,children:Object(g.jsx)("label",{className:"fs-3 mx-4 text-success",children:i})}),Object(g.jsx)(b.a,{onClick:function(){return o(i+1)},variant:"light",size:"lg",color:"danger",className:"bi bi-plus-circle-fill",disabled:i===t}),Object(g.jsx)("div",{className:"text-center",children:Object(g.jsx)(b.a,{variant:"success",onClick:function(){n(i)},children:"Agregar al Carrito"})})]})},B=c(119),z=c(87),G=c(57),H=c.n(G);var U=function(e){var t=e.item,c=S().addItem,n=Object(a.useState)(!1),s=Object(j.a)(n,2),r=s[0],o=s[1];return Object(g.jsx)(d.a,{className:"p-2",children:Object(g.jsxs)(H.a,{left:!0,children:[Object(g.jsx)("br",{}),Object(g.jsxs)(B.a,{className:"gx-5  shadow p-3 mb-5 bg-white rounded",children:[Object(g.jsx)(z.a,{children:Object(g.jsx)("img",{src:t.image,className:"containerImagenItem",alt:"Producto de Refugio Tienda Deco productos"})}),Object(g.jsx)(z.a,{children:Object(g.jsxs)("div",{className:"container",children:[Object(g.jsx)("h3",{children:t.name}),Object(g.jsx)("h5",{children:t.description}),Object(g.jsxs)("h3",{children:["$ ",t.price]}),r?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)(b.a,{as:i.b,to:"/cart",variant:"secondary",children:"Terminar Compra"}),Object(g.jsx)("br",{})]}):Object(g.jsx)(R,{stock:t.stock,initial:1,onAdd:function(e){c({item:t,quantity:e}),o(!0)}}),Object(g.jsx)("br",{}),Object(g.jsxs)("button",{type:"button",className:"btn btn-outline-dark btn-sm m-1",disabled:!0,children:[t.stock," cantidades disponibles"]}),Object(g.jsx)("br",{}),Object(g.jsx)(i.b,{to:"/category/todos",children:Object(g.jsx)("button",{className:"btn btn-outline-success btn-sm m-1",children:"Volver"})}),Object(g.jsx)("h6",{children:"Medios de Pago:"}),Object(g.jsx)("img",{src:"/assets/mediosPago/mediosPago.png",alt:"distintos medios de pago",className:"w-75"})]})})]})]})})};var L=function(){var e=Object(o.f)().itemId,t=Object(a.useState)([]),c=Object(j.a)(t,2),n=c[0],s=c[1],r=Object(a.useState)(!0),i=Object(j.a)(r,2),u=i[0],O=i[1];return Object(a.useEffect)((function(){x().collection("items").doc(e).get().then((function(e){return s(Object(l.a)({id:e.id},e.data()))})).catch((function(e){return alert("Upsss!!! Error: ".concat(e))})).finally((function(){return O(!1)}))}),[e]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),u?Object(g.jsxs)(d.a,{children:[Object(g.jsxs)(b.a,{className:"m-5",variant:"success",disabled:!0,children:[Object(g.jsx)(m.a,{as:"span",animation:"border",size:"lg",role:"status","aria-hidden":"true"}),"L O A D I N G ..."]})," "]}):Object(g.jsx)(U,{item:n})]})},M=c(51),V=c.n(M);var J=function(e){var t=e.greeting;return Object(g.jsxs)(d.a,{children:[Object(g.jsx)("h2",{className:"text-center mt-5 pt-4",children:t}),Object(g.jsx)(V.a,{children:Object(g.jsx)("img",{src:"assets/img/productos.png",className:"container pt-5",alt:"Refugio Tienda Deco productos"})}),Object(g.jsx)("h2",{className:"text-center p-3",children:"Objetos de Dise\xf1o para tu casa"}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{})]})},Q=c(11),Y=c(123),$=c(121),K=c(76);var W=function(){var e=S(),t=e.cartList,c=e.itemsCarrito,n=e.totalCart,s=e.clearCart,r=e.clearItem,o=Object(a.useState)(!1),m=Object(j.a)(o,2),u=m[0],O=m[1],h=Object(a.useState)(""),p=Object(j.a)(h,2),f=p[0],v=p[1],y=Object(a.useState)({name:"",phone:"",email:""}),N=Object(j.a)(y,2),C=N[0],k=N[1];return Object(g.jsx)(g.Fragment,{children:0===c()?Object(g.jsxs)(d.a,{children:[Object(g.jsx)("br",{}),Object(g.jsxs)(M.Flip,{top:!0,children:[Object(g.jsx)("h1",{className:"mt-4 text-danger",children:"El carrito est\xe1 vac\xedo..."}),Object(g.jsx)(b.a,{as:i.b,to:"/category/todos",variant:"danger",className:"mx-2",children:"Hac\xe9 tu COMPRA!!!"})]}),Object(g.jsx)("br",{}),Object(g.jsx)("video",{loop:!0,autoPlay:!0,children:Object(g.jsx)("source",{src:"/assets/videos/carritoVacio.mp4",type:"video/mp4",alt:"Marketing illustrations by Storyset"})}),Object(g.jsx)("br",{})]}):Object(g.jsx)("div",{children:Object(g.jsxs)(d.a,{children:[Object(g.jsx)("h1",{className:"mt-5 p-1",children:"Carrito de compras"}),Object(g.jsxs)("table",{className:"table table-bordered table-primary text-center",children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{className:"fs-5 fw-bold",children:[Object(g.jsx)("th",{children:"Id."}),Object(g.jsx)("th",{children:"Cantidad"}),Object(g.jsx)("th",{children:"Descripci\xf3n"}),Object(g.jsx)("th",{children:"Precio Unit"}),Object(g.jsx)("th",{children:"Subtotal"}),Object(g.jsx)("th",{children:"Eliminar"})]})}),Object(g.jsx)("tbody",{children:t.map((function(e){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:e.id}),Object(g.jsx)("td",{children:e.quantity}),Object(g.jsx)("td",{children:e.name}),Object(g.jsx)("td",{children:Intl.NumberFormat("es-AR",{currency:"ARS",style:"currency"}).format(e.price)}),Object(g.jsx)("td",{children:Intl.NumberFormat("es-AR",{currency:"ARS",style:"currency"}).format(e.quantity*e.price)}),Object(g.jsx)("td",{className:"bi bi-trash-fill",onClick:function(){return r(e.id)}})]},e.id)}))})]}),Object(g.jsx)("h5",{children:"Totales de unidades del carrito: ".concat(c()," -  Importe Total de la Compra ").concat(Intl.NumberFormat("es-AR",{currency:"ARS",style:"currency"}).format(n()))}),Object(g.jsx)("h6",{children:"Medios de Pago:"}),Object(g.jsx)("img",{src:"/assets/mediosPago/mediosPago.png",alt:"distintos medios de pago",className:"w-50 m-2"}),Object(g.jsx)("br",{}),Object(g.jsx)(b.a,{as:i.b,to:"/category/todos",variant:"success",className:"mx-3 mt-2",children:"Seguir comprando"}),Object(g.jsx)(b.a,{onClick:function(){O(!0)},variant:"success",className:"mx-3 mt-2",children:"Finalizar compra"}),Object(g.jsx)(b.a,{onClick:function(){s()},variant:"success",className:"mx-3 mt-2",children:"Vaciar carrito"}),Object(g.jsx)("br",{}),Object(g.jsxs)(Y.a,{show:u,onHide:function(){return O(!1)},children:[Object(g.jsx)(Y.a.Header,{closeButton:!0,className:"bg-success",children:Object(g.jsx)(Y.a.Title,{className:"text-white",children:"Formulario de Compra"})}),Object(g.jsx)(Y.a.Body,{children:Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(){var e={};e.date=K.a.firestore.Timestamp.fromDate(new Date),e.buyer=C,e.total=n(),e.items=t.map((function(e){return{id:e.id,name:e.name,quantity:e.quantity,price:e.price}})),v("");var c=x();c.collection("orders").add(e).then((function(e){return v(e.id)})).catch((function(e){return alert("Upss!! Error: ".concat(e))})).finally((function(){return k({name:"",phone:"",email:""})}));var a=c.collection("items").where(K.a.firestore.FieldPath.documentId(),"in",t.map((function(e){return e.id}))),s=c.batch();a.get().then((function(e){e.docs.forEach((function(e){s.update(e.ref,{stock:e.data().stock-t.find((function(t){return t.id===e.id})).quantity})})),s.commit().then((function(e){console.log("resultado batch:",e)}))}))}()},onChange:function(e){k(Object(l.a)(Object(l.a)({},C),{},Object(Q.a)({},e.target.name,e.target.value)))},children:[Object(g.jsxs)($.a.Group,{as:B.a,className:"mb-3",controlId:"validationCustomUsername",children:[Object(g.jsx)($.a.Label,{column:!0,sm:3,children:"Nombre"}),Object(g.jsx)(z.a,{sm:11,children:Object(g.jsx)($.a.Control,{placeholder:"Nombre y Apellido",name:"name",defaultValue:C.name})})]}),Object(g.jsxs)($.a.Group,{as:B.a,className:"mb-3",controlId:"formHorizontalPassword",children:[Object(g.jsx)($.a.Label,{column:!0,sm:3,children:"Telefono"}),Object(g.jsx)(z.a,{sm:11,children:Object(g.jsx)($.a.Control,{placeholder:"Telefono",name:"phone",defaultValue:C.phone})})]}),Object(g.jsxs)($.a.Group,{as:B.a,className:"mb-3",controlId:"formHorizontalEmail",children:[Object(g.jsx)($.a.Label,{column:!0,sm:3,children:"Email"}),Object(g.jsx)(z.a,{sm:11,children:Object(g.jsx)($.a.Control,{placeholder:"@email",name:"email",defaultValue:C.email})})]}),Object(g.jsx)($.a.Group,{as:B.a,className:"mb-4 align-items-center",children:Object(g.jsx)(z.a,{sm:10,children:Object(g.jsx)(b.a,{type:"submit",variant:"success",children:"Generar Orden"})})})]})}),Object(g.jsx)(Y.a.Footer,{children:""!==f&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(M.Flip,{left:!0,opposite:!0,cascade:!0,children:Object(g.jsx)(Y.a.Body,{className:"bg-danger text-center text-white fw-normal",children:"Muchas GRACIAS por su Compra!!! Tome nota del N\xfamero de\n\t\t\t\t\t\t\t\t\t\t\tOrden: ".concat(f)})}),Object(g.jsx)(b.a,{variant:"secondary",onClick:function(){O(!1),s()},children:"Close"})]})})]})]})})})};c(113);var X=function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{className:"appHeader p-5",children:Object(g.jsx)(A,{children:Object(g.jsxs)(i.a,{children:[Object(g.jsx)(E,{}),Object(g.jsxs)(o.c,{children:[Object(g.jsx)(o.a,{exact:!0,path:"/",children:Object(g.jsx)(J,{greeting:"Bienvenidos a REFUGIO - Tienda Deco"})}),Object(g.jsx)(o.a,{exact:!0,path:"/category/:categoryId",component:N}),Object(g.jsx)(o.a,{exact:!0,path:"/item/:itemId",component:L}),Object(g.jsx)(o.a,{exact:!0,path:"/cart",component:W})]})]})})})})};r.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(X,{})}),document.getElementById("root"))}},[[114,1,2]]]);
//# sourceMappingURL=main.906fc8d3.chunk.js.map