(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{93:function(e,t,c){},94:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c.n(a),n=c(30),r=c.n(n),i=c(11),l=c(13),o=c(3),j=c(8),d=c(97),b=c(102),m=c(100),u=c(96),O=c(98),x=c(16),h=c(44),g=(c(74),h.a.initializeApp({apiKey:"AIzaSyCBQ_wQx8ja-WbYHZAAOOXlx-UY9JO7J9c",authDomain:"refugio-ecommerce.firebaseapp.com",projectId:"refugio-ecommerce",storageBucket:"refugio-ecommerce.appspot.com",messagingSenderId:"471407983104",appId:"1:471407983104:web:03590b2b10cc199191b6e5"}));function f(){return h.a.firestore(g)}var p=c(104),N=c(0);var v=function(e){var t=e.item;return Object(N.jsx)("div",{className:"container col",children:Object(N.jsx)(x.d,{children:Object(N.jsxs)(p.a,{style:{width:"16rem"},className:"mt-5 shadow p-3 mb-5 bg-white rounded",children:[Object(N.jsx)(i.b,{to:"/item/".concat(t.id),children:Object(N.jsx)(p.a.Img,{variant:"top",src:t.image,alt:"Productos de Refugio Tienda Deco",loading:"lazy"})}),Object(N.jsxs)(p.a.Body,{children:[Object(N.jsxs)(p.a.Title,{className:"text-center fs-6",children:["Id: ",t.id]}),Object(N.jsx)(p.a.Title,{className:"text-center",children:t.name}),Object(N.jsxs)(p.a.Title,{className:"text-center",children:["$ ",t.price]}),Object(N.jsx)(i.b,{to:"/item/".concat(t.id),children:Object(N.jsx)("button",{className:"btn btn-success btn-sm",children:"+ Info"})}),Object(N.jsxs)(p.a.Title,{className:"text-center m-2",children:["Stock ",t.stock]})]})]})})})},y=Object(a.memo)((function(e){var t=e.items;return Object(N.jsx)(N.Fragment,{children:t.map((function(e){return Object(N.jsx)(v,{item:e},e.id)}))})})),C=c(103);var S=function(e){var t=e.message,c=e.handleMessageErr;return Object(N.jsxs)(C.a,{show:!0,children:[Object(N.jsx)(C.a.Header,{className:"text-white bg-danger",children:Object(N.jsx)(C.a.Title,{children:"UPSSS!!! se produjo un Error"})}),Object(N.jsxs)(C.a.Body,{children:[Object(N.jsx)("h4",{className:"text-danger",children:"Error:"}),Object(N.jsx)("p",{children:t})]}),Object(N.jsx)(C.a.Footer,{children:Object(N.jsx)(u.a,{variant:"danger",onClick:function(){c()},children:"Close"})})]})};var w=function(){var e=Object(l.f)().categoryId,t=Object(a.useState)([]),c=Object(j.a)(t,2),s=c[0],n=c[1],r=Object(a.useState)(!0),h=Object(j.a)(r,2),g=h[0],p=h[1],v=Object(a.useState)(""),C=Object(j.a)(v,2),w=C[0],k=C[1];return Object(a.useEffect)((function(){var t=f();(void 0===e?t.collection("items").orderBy("category","asc").orderBy("name"):t.collection("items").where("category","==",e).orderBy("name")).get().then((function(e){return n(e.docs.map((function(e){return Object(o.a)({id:e.id},e.data())})))})).catch((function(e){return k(e)})).finally((function(){return p(!1)}))}),[e]),Object(N.jsxs)(d.a,{className:"text-center",children:[Object(N.jsxs)(x.c,{direction:"down",children:[Object(N.jsx)("br",{}),Object(N.jsx)("h2",{className:"mt-5 text-center fw-bolder",children:"Cat\xe1logo de Productos"})]}),Object(N.jsx)(b.a,{className:" fs-5 justify-content-center shadow",children:Object(N.jsxs)(m.a,{className:"mx-auto fw-bolder",children:[Object(N.jsx)("p",{className:"mt-2 me-5 text-success",children:"Seleccionar Categor\xeda:"}),Object(N.jsx)(i.b,{className:"nav-link",to:"/",children:"Todas"}),Object(N.jsx)(i.b,{className:"nav-link",to:"/category/cuadros",children:"Cuadros"}),Object(N.jsx)(i.b,{className:"nav-link",to:"/category/macetas",children:"Macetas"}),Object(N.jsx)(i.b,{className:"nav-link",to:"/category/plantas",children:"Plantas"}),Object(N.jsx)(i.b,{className:"nav-link",to:"/category/vinilos",children:"Vinilos"})]})}),g?Object(N.jsxs)(u.a,{className:"m-5",variant:"success",disabled:!0,children:[Object(N.jsx)(O.a,{as:"span",animation:"border",role:"status","aria-hidden":"true",size:"lg"}),"L O A D I N G ..."]}):Object(N.jsx)("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-2 row-cols-lg-4 row-cols-xxl-4 mb-5 text-center",children:Object(N.jsx)(y,{items:s})}),Object(N.jsx)("div",{children:""!==w&&Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(S,{message:w,handleMessageErr:function(){return k("")}})})})]})},k=c(99),I=c(78),q=c(50),F=Object(a.createContext)([]),A=function(){return Object(a.useContext)(F)},P=function(e){var t=e.children,c=Object(a.useState)((function(){return null!==localStorage.cartList?JSON.parse(localStorage.cartList):[]})),s=Object(j.a)(c,2),n=s[0],r=s[1];Object(a.useEffect)((function(){localStorage.setItem("cartList",JSON.stringify(n))}),[n]);return Object(N.jsx)(F.Provider,{value:{cartList:n,addItem:function(e){var t=Object(q.a)(n),c=t.findIndex((function(t){return t.id===e.item.id}));-1===c?r([].concat(Object(q.a)(n),[Object(o.a)(Object(o.a)({},e.item),{},{quantity:e.quantity})])):(t[c].quantity+e.quantity>t[c].stock?t[c].quantity=t[c].stock:t[c].quantity+=e.quantity,r(t))},itemsCart:function(){return n.reduce((function(e,t){return e+t.quantity}),0)},clearCart:function(){r([])},totalCart:function(){return n.reduce((function(e,t){return e+t.quantity*t.price}),0)},clearItem:function(e){r(n.filter((function(t){return t.id!==e})))}},children:t})};var T=function(e){var t=e.stock,c=e.initial,s=e.onAdd,n=Object(a.useState)(c),r=Object(j.a)(n,2),i=r[0],l=r[1];return Object(N.jsxs)("div",{children:[Object(N.jsx)(u.a,{onClick:function(){return l(i-1)},className:"btn-lg btn-light bi bi-dash-circle-fill",disabled:1===i}),Object(N.jsx)("label",{className:"fs-3 mx-4 text-success",children:i}),Object(N.jsx)(u.a,{onClick:function(){return l(i+1)},className:"btn-lg btn-light btn-danger bi bi-plus-circle-fill",disabled:i>t-1}),Object(N.jsx)("div",{className:"text-center",children:Object(N.jsx)(u.a,{onClick:function(){s(i)},className:"btn-success",disabled:0===t,children:"Agregar al Carrito"})})]})};var R=function(e){var t=e.item,c=A().addItem,s=Object(a.useState)(!1),n=Object(j.a)(s,2),r=n[0],l=n[1];return Object(N.jsx)(d.a,{className:"p-2 text-center",children:Object(N.jsxs)(x.c,{direction:"up",dampimg:"3",triggerOnce:!0,children:[Object(N.jsx)("br",{}),Object(N.jsxs)(k.a,{className:"gx-5  shadow p-3 mb-5 bg-white rounded",children:[Object(N.jsx)(I.a,{children:Object(N.jsx)("img",{src:t.image,className:"containerImagenItem",loading:"lazy",alt:"Producto de Refugio Tienda Deco productos"})}),Object(N.jsx)(I.a,{children:Object(N.jsxs)("div",{className:"text-center",children:[Object(N.jsx)("h3",{children:t.name}),Object(N.jsx)("h5",{children:t.description}),Object(N.jsxs)("h3",{children:["$ ",t.price]}),r?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)(u.a,{as:i.b,to:"/cart",variant:"secondary",children:"Terminar Compra"}),Object(N.jsx)("br",{})]}):Object(N.jsx)(T,{stock:t.stock,initial:1,onAdd:function(e){c({item:t,quantity:e}),l(!0)}}),Object(N.jsx)("br",{}),Object(N.jsxs)("button",{type:"button",className:"btn btn-outline-dark btn-sm m-1",disabled:!0,children:[t.stock," cantidades disponibles"]}),Object(N.jsx)("br",{}),Object(N.jsx)(i.b,{to:"/",children:Object(N.jsx)("button",{className:"btn btn-success m-1",children:"Volver"})}),Object(N.jsx)("h6",{children:"Medios de Pago:"}),Object(N.jsx)("img",{src:"/assets/mediosPago/mediosPago.png",alt:"distintos medios de pago",className:"w-75"})]})})]})]})})};var E=function(){var e=Object(l.f)().itemId,t=Object(a.useState)([]),c=Object(j.a)(t,2),s=c[0],n=c[1],r=Object(a.useState)(!0),i=Object(j.a)(r,2),b=i[0],m=i[1],x=Object(a.useState)(""),h=Object(j.a)(x,2),g=h[0],p=h[1];return Object(a.useEffect)((function(){f().collection("items").doc(e).get().then((function(e){return n(Object(o.a)({id:e.id},e.data()))})).catch((function(e){return p(e)})).finally((function(){return m(!1)}))}),[e]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),b?Object(N.jsx)(d.a,{className:"text-center",children:Object(N.jsxs)(u.a,{className:"m-5",variant:"success",disabled:!0,children:[Object(N.jsx)(O.a,{as:"span",animation:"border",size:"lg",role:"status","aria-hidden":"true"}),"L O A D I N G ..."]})}):Object(N.jsx)(R,{item:s}),Object(N.jsx)("div",{children:""!==g&&Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(S,{message:g,handleMessageErr:function(){return p("")}})})})]})};var D=function(e){var t=e.greeting;return Object(N.jsx)("div",{children:Object(N.jsx)(d.a,{className:"text-center",children:Object(N.jsxs)(x.d,{cascade:!0,delay:100,damping:"1",children:[Object(N.jsx)("h2",{className:"text-center mt-5 pt-4",children:t}),Object(N.jsx)("img",{src:"assets/img/productos.png",className:"container pt-5",alt:"Refugio Tienda Deco productos"}),Object(N.jsx)("h2",{className:"text-center p-3",children:"Objetos de Dise\xf1o para tu casa"}),Object(N.jsx)("p",{className:"fst-italic fs-5",children:'Somos un emprendimiento Familiar que CREE que siempre es posible salir adelante, amigarse con la vida, con nosotros mismos y con lo que nos rodea. As\xed surge REFUGIO, como un espacio que abriga y protege, para creer y crear productos que integran el reciclado, el amor por la naturaleza y el dise\xf1o, para desarrollar un nuevo mundo de "objetos con alma", endientes a mostrar el cuidado a nosotros mismos, a nuestra historia y a nuestro entorno, con productos que buscan el cuidado de nuestro medio ambiente y la buena manufactura como distintivo.'}),Object(N.jsx)("br",{})]})})})},L=(c(93),c(9));var z=function(){var e=A(),t=e.cartList,c=e.itemsCart,a=e.totalCart,s=e.clearItem;return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(x.b,{dampimg:"2",children:Object(N.jsxs)(d.a,{children:[Object(N.jsx)("h1",{className:"mt-5 p-1",children:"Carrito de compras"}),Object(N.jsxs)("table",{className:"table table-bordered table-primary text-center table-striped",children:[Object(N.jsx)("thead",{children:Object(N.jsxs)("tr",{className:"fs-5 fw-bold",children:[Object(N.jsx)("th",{children:"Id."}),Object(N.jsx)("th",{children:"Cantidad"}),Object(N.jsx)("th",{children:"Descripci\xf3n"}),Object(N.jsx)("th",{children:"Precio Unit"}),Object(N.jsx)("th",{children:"Subtotal"}),Object(N.jsx)("th",{children:"Eliminar"})]})}),Object(N.jsxs)("tbody",{children:[t.map((function(e){return Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{children:Object(N.jsx)("img",{src:e.image,alt:"Productos de Refugio Tienda Deco",className:"shadow-lg",style:{height:100}})}),Object(N.jsx)("td",{className:"align-middle",children:e.quantity}),Object(N.jsx)("td",{className:"align-middle",children:e.name}),Object(N.jsx)("td",{className:"align-middle",children:Intl.NumberFormat("es-AR",{currency:"ARS",style:"currency"}).format(e.price)}),Object(N.jsx)("td",{className:"align-middle",children:Intl.NumberFormat("es-AR",{currency:"ARS",style:"currency"}).format(e.quantity*e.price)}),Object(N.jsx)("td",{className:"bi bi-trash-fill align-middle fs-4",onClick:function(){return s(e.id)}})]},e.id)})),Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{className:"fw-bold",children:"Cant.Unidades:"}),Object(N.jsx)("td",{className:"fw-bold",children:c()}),Object(N.jsx)("td",{}),Object(N.jsx)("td",{className:"fw-bold",children:"TOTAL COMPRA"}),Object(N.jsx)("td",{className:"fw-bold",children:Intl.NumberFormat("es-AR",{currency:"ARS",style:"currency"}).format(a())}),Object(N.jsx)("td",{})]})]})]}),Object(N.jsx)("br",{})]})})})},B=c(101);var G=function(e){var t=e.showForm,c=e.formData,a=e.handleSubmit,s=e.handleChange,n=e.handleClose,r=e.orderId,l=e.orderProcess;return Object(N.jsxs)(C.a,{show:t,children:[Object(N.jsx)(C.a.Header,{className:"bg-success",children:Object(N.jsx)(C.a.Title,{className:"text-white",children:"Formulario de Compra"})}),Object(N.jsx)(C.a.Body,{children:Object(N.jsxs)("form",{onSubmit:a,onChange:s,children:[Object(N.jsxs)(B.a.Group,{as:k.a,className:"mb-3",children:[Object(N.jsx)(B.a.Label,{column:!0,sm:3,children:"Nombre"}),Object(N.jsx)(I.a,{sm:11,children:Object(N.jsx)(B.a.Control,{placeholder:"Nombre y Apellido",name:"name",required:!0,defaultValue:c.name})})]}),Object(N.jsxs)(B.a.Group,{as:k.a,className:"mb-3",children:[Object(N.jsx)(B.a.Label,{column:!0,sm:3,children:"Telefono"}),Object(N.jsx)(I.a,{sm:11,children:Object(N.jsx)(B.a.Control,{placeholder:"Telefono",name:"phone",required:!0,defaultValue:c.phone})})]}),Object(N.jsxs)(B.a.Group,{as:k.a,className:"mb-3",children:[Object(N.jsx)(B.a.Label,{column:!0,sm:3,children:"email"}),Object(N.jsx)(I.a,{sm:11,children:Object(N.jsx)(B.a.Control,{placeholder:"@email",name:"email",required:!0,defaultValue:c.email})})]}),Object(N.jsxs)(B.a.Group,{as:k.a,className:"mb-3",children:[Object(N.jsx)(B.a.Label,{column:!0,sm:3,children:"Reingresar"}),Object(N.jsx)(I.a,{sm:11,children:Object(N.jsx)(B.a.Control,{placeholder:"repetir email",name:"email2",required:!0,defaultValue:c.email2})})]}),""!==c.email&&c.email===c.email2?Object(N.jsx)(B.a.Group,{as:k.a,className:"mb-4 align-items-center",children:Object(N.jsx)(I.a,{sm:10,children:Object(N.jsx)(u.a,{type:"submit",variant:"success",children:"Generar Orden"})})}):Object(N.jsx)(N.Fragment,{})]})}),Object(N.jsx)(C.a.Footer,{children:l&&(""===r?Object(N.jsxs)(C.a.Body,{className:"text-center text-success",children:[Object(N.jsx)(O.a,{as:"span",animation:"border",role:"status","aria-hidden":"true",size:"lg"}),"Procesando ..."]}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(x.b,{left:!0,opposite:!0,cascade:!0,children:Object(N.jsx)(C.a.Body,{className:"bg-danger text-center text-white fw-normal",children:"La Orden se gener\xf3 correctamente, muchas GRACIAS por su Compra!!! Para seguimiento de la misma tome nota del siguiente N\xfamero: ".concat(r)})}),Object(N.jsx)(u.a,{as:i.b,to:"/",variant:"success",onClick:n,children:"Close"})]}))})]})};var M=function(){return Object(N.jsxs)(d.a,{className:"text-center",children:[Object(N.jsxs)(x.a,{effect:"shake",triggerOnce:"true",delay:2300,children:[Object(N.jsx)("br",{}),Object(N.jsx)("h1",{className:"mt-4 text-danger",children:"El carrito est\xe1 vac\xedo..."}),Object(N.jsx)(u.a,{as:i.b,to:"/",variant:"danger",className:"mx-2",children:"Hac\xe9 tu COMPRA!!!"})]}),Object(N.jsxs)(x.c,{damping:"0",triggerOnce:!0,children:[Object(N.jsx)("br",{}),Object(N.jsx)("video",{loop:!0,autoPlay:!0,children:Object(N.jsx)("source",{src:"/assets/videos/carritoVacio.mp4",type:"video/mp4",alt:"Marketing illustrations by Storyset",loading:"lazy"})}),Object(N.jsx)("br",{})]})]})};var V=function(){var e=A(),t=e.cartList,c=e.totalCart,s=e.clearCart,n=e.itemsCart,r=Object(a.useState)(!1),l=Object(j.a)(r,2),b=l[0],m=l[1],O=Object(a.useState)(""),x=Object(j.a)(O,2),g=x[0],p=x[1],v=Object(a.useState)(!1),y=Object(j.a)(v,2),C=y[0],w=y[1],k=Object(a.useState)(""),I=Object(j.a)(k,2),q=I[0],F=I[1],P=Object(a.useState)({name:"",phone:"",email:"",email2:""}),T=Object(j.a)(P,2),R=T[0],E=T[1];return Object(N.jsx)(N.Fragment,{children:0===n()?Object(N.jsx)(M,{}):Object(N.jsxs)(d.a,{className:"text-center",children:[Object(N.jsx)(z,{}),Object(N.jsx)(u.a,{as:i.b,to:"/",variant:"success",className:"mx-3",children:"Seguir comprando"}),Object(N.jsx)(u.a,{onClick:function(){m(!0)},variant:"success",className:"mx-3",children:"Finalizar compra"}),Object(N.jsx)(u.a,{onClick:function(){s()},variant:"success",className:"mx-3",children:"Vaciar carrito"}),Object(N.jsx)("br",{}),Object(N.jsx)("h6",{className:"mt-3",children:"Medios de Pago:"}),Object(N.jsx)("img",{src:"/assets/mediosPago/mediosPago.png",alt:"distintos medios de pago",className:"w-50",loading:"lazy"}),Object(N.jsx)(G,{showForm:b,formData:R,handleSubmit:function(e){e.preventDefault(),function(){w(!0);var e={};e.date=h.a.firestore.Timestamp.fromDate(new Date),e.buyer=R,e.total=c(),e.state="Generada",e.items=t.map((function(e){return{id:e.id,name:e.name,quantity:e.quantity,price:e.price}})),p("");var a=f();a.collection("orders").add(e).then((function(e){return p(e.id)})).catch((function(e){return F(e)})).finally((function(){return E({name:"",phone:"",email:"",email2:""})}));var s=a.collection("items").where(h.a.firestore.FieldPath.documentId(),"in",t.map((function(e){return e.id}))),n=a.batch();s.get().then((function(e){e.docs.forEach((function(e){n.update(e.ref,{stock:e.data().stock-t.find((function(t){return t.id===e.id})).quantity})})),n.commit().catch((function(e){return F(e)}))}))}()},handleChange:function(e){E(Object(o.a)(Object(o.a)({},R),{},Object(L.a)({},e.target.name,e.target.value)))},handleClose:function(){m(!1),w(!1),s()},orderId:g,orderProcess:C}),Object(N.jsx)("div",{children:""!==q&&Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(S,{message:q,handleMessageErr:function(){return F("")}})})})]})})};var J=function(){var e=A().itemsCart;return Object(N.jsx)("div",{children:Object(N.jsx)(x.b,{children:Object(N.jsx)("p",{className:"bi bi-cart4 fs-4 text-secondary text-decoration-none",children:" "+e()})})})};var U=function(){return Object(N.jsx)(b.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",fixed:"top",className:"fs-5",children:Object(N.jsxs)(d.a,{children:[Object(N.jsx)(i.b,{to:"/",children:Object(N.jsx)("img",{src:"/refugio.png",className:"nav-link d-inline-block align-top",loading:"lazy",alt:"Refugio Tienda Deco logo"})}),Object(N.jsx)(b.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(N.jsx)(b.a.Collapse,{id:"responsive-navbar-nav",children:Object(N.jsxs)(m.a,{className:"me-5 ps-5",children:[Object(N.jsx)(i.b,{className:"nav-link",to:"/nosotros",children:"Nosotros"}),Object(N.jsx)(i.b,{className:"nav-link",to:"/",children:"Cat\xe1logo"})]})}),Object(N.jsx)(i.b,{to:"/cart",className:"nav-link ms-5 ps-5",children:Object(N.jsx)(J,{})})]})})};var H=function(){return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)("div",{className:"appHeader p-5",children:Object(N.jsx)(P,{children:Object(N.jsxs)(i.a,{children:[Object(N.jsx)(U,{}),Object(N.jsxs)(l.c,{children:[Object(N.jsx)(l.a,{exact:!0,path:"/nosotros",children:Object(N.jsx)(D,{greeting:"Bienvenidos a REFUGIO - Tienda Deco"})}),Object(N.jsx)(l.a,{exact:!0,path:"/",component:w}),Object(N.jsx)(l.a,{exact:!0,path:"/category/:categoryId",component:w}),Object(N.jsx)(l.a,{exact:!0,path:"/item/:itemId",component:E}),Object(N.jsx)(l.a,{exact:!0,path:"/cart",component:V})]})]})})})})};r.a.render(Object(N.jsx)(s.a.StrictMode,{children:Object(N.jsx)(H,{})}),document.getElementById("root"))}},[[94,1,2]]]);
//# sourceMappingURL=main.9c10751b.chunk.js.map