(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{93:function(e,t,c){},94:function(e,t,c){"use strict";c.r(t);var a=c(0),s=c.n(a),n=c(30),r=c.n(n),i=c(12),l=c(13),o=c(3),j=c(8),d=c(96),b=c(97),m=c(98),u=c(44),O=(c(74),u.a.initializeApp({apiKey:"AIzaSyCBQ_wQx8ja-WbYHZAAOOXlx-UY9JO7J9c",authDomain:"refugio-ecommerce.firebaseapp.com",projectId:"refugio-ecommerce",storageBucket:"refugio-ecommerce.appspot.com",messagingSenderId:"471407983104",appId:"1:471407983104:web:03590b2b10cc199191b6e5"}));function x(){return u.a.firestore(O)}var h=c(104),g=c(18),f=c(1);var p=function(e){var t=e.item;return Object(f.jsx)("div",{className:"container col",children:Object(f.jsx)(g.d,{children:Object(f.jsxs)(h.a,{style:{width:"16rem"},className:"mt-5 shadow p-3 mb-5 bg-white rounded",children:[Object(f.jsx)(i.b,{to:"/item/".concat(t.id),children:Object(f.jsx)(h.a.Img,{variant:"top",src:t.image,alt:"Productos de Refugio Tienda Deco",loading:"lazy"})}),Object(f.jsxs)(h.a.Body,{children:[Object(f.jsxs)(h.a.Title,{className:"text-center fs-6",children:["Id: ",t.id]}),Object(f.jsx)(h.a.Title,{className:"text-center",children:t.name}),Object(f.jsxs)(h.a.Title,{className:"text-center",children:["$ ",t.price]}),Object(f.jsx)(i.b,{to:"/item/".concat(t.id),children:Object(f.jsx)("button",{className:"btn btn-success btn-sm",children:"+ Info"})}),Object(f.jsxs)(h.a.Title,{className:"text-center m-2",children:["Stock ",t.stock]})]})]})})})},v=Object(a.memo)((function(e){var t=e.items;return Object(f.jsx)(f.Fragment,{children:t.map((function(e){return Object(f.jsx)(p,{item:e},e.id)}))})}));var N=function(){var e=Object(l.f)().categoryId,t=Object(a.useState)([]),c=Object(j.a)(t,2),s=c[0],n=c[1],r=Object(a.useState)(!0),i=Object(j.a)(r,2),u=i[0],O=i[1];return Object(a.useEffect)((function(){var t=x();("todos"===e?t.collection("items").orderBy("category","asc").orderBy("name"):t.collection("items").where("category","==",e).orderBy("name")).get().then((function(e){return n(e.docs.map((function(e){return Object(o.a)({id:e.id},e.data())})))})).catch((function(e){return alert("UPSSS Error: ".concat(e))})).finally((function(){return O(!1)}))}),[e]),Object(f.jsxs)(d.a,{children:[Object(f.jsxs)(g.c,{direction:"down",children:[Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsxs)("h2",{className:"mt-5",children:["Nuestros productos - ",e.toUpperCase()]})]}),u?Object(f.jsxs)(b.a,{className:"m-5",variant:"success",disabled:!0,children:[Object(f.jsx)(m.a,{as:"span",animation:"border",role:"status","aria-hidden":"true",size:"lg"}),"L O A D I N G ..."]}):Object(f.jsx)("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-2 row-cols-lg-4 row-cols-xxl-4 mb-5 text-center",children:Object(f.jsx)(v,{items:s})})]})},y=c(102),C=c(100),S=c(50),k=Object(a.createContext)([]),w=function(){return Object(a.useContext)(k)},I=function(e){var t=e.children,c=Object(a.useState)([]),s=Object(j.a)(c,2),n=s[0],r=s[1];return Object(f.jsx)(k.Provider,{value:{cartList:n,addItem:function(e){var t=Object(S.a)(n),c=t.findIndex((function(t){return t.id===e.item.id}));-1===c?r([].concat(Object(S.a)(n),[Object(o.a)(Object(o.a)({},e.item),{},{quantity:e.quantity})])):(t[c].quantity+e.quantity>t[c].stock?t[c].quantity=t[c].stock:t[c].quantity+=e.quantity,r(t))},itemsCart:function(){return n.reduce((function(e,t){return e+t.quantity}),0)},clearCart:function(){r([])},totalCart:function(){return n.reduce((function(e,t){return e+t.quantity*t.price}),0)},clearItem:function(e){r(n.filter((function(t){return t.id!==e})))}},children:t})};var A=function(){var e=w().itemsCart;return Object(f.jsx)("div",{children:Object(f.jsx)(g.b,{children:Object(f.jsx)("p",{className:"bi bi-cart4 fs-4 text-secondary text-decoration-none",children:" "+e()})})})};var P=function(){return Object(f.jsx)(y.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",fixed:"top",children:Object(f.jsxs)(d.a,{children:[Object(f.jsx)(i.b,{to:"/",children:Object(f.jsx)("img",{src:"/refugio.png",className:"nav-link d-inline-block align-top mx-5 ps-5",loading:"lazy",alt:"Refugio Tienda Deco logo"})}),Object(f.jsx)(y.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(f.jsx)(y.a.Collapse,{id:"responsive-navbar-nav",children:Object(f.jsxs)(C.a,{className:"me-auto",children:[Object(f.jsx)(i.b,{className:"nav-link",to:"/",children:"Home"}),Object(f.jsx)(i.b,{className:"nav-link",to:"/category/todos",children:"Productos"}),Object(f.jsx)(i.b,{className:"nav-link",to:"/category/cuadros",children:"Cuadros"}),Object(f.jsx)(i.b,{className:"nav-link",to:"/category/macetas",children:"Macetas"}),Object(f.jsx)(i.b,{className:"nav-link",to:"/category/plantas",children:"Plantas"}),Object(f.jsx)(i.b,{className:"nav-link",to:"/category/vinilos",children:"Vinilos"})]})}),Object(f.jsx)(i.b,{to:"/cart",className:"nav-link ms-5 ps-5",children:Object(f.jsx)(A,{})})]})})};var q=function(e){var t=e.stock,c=e.initial,s=e.onAdd,n=Object(a.useState)(c),r=Object(j.a)(n,2),i=r[0],l=r[1];return Object(f.jsxs)("div",{children:[Object(f.jsx)(b.a,{onClick:function(){return l(i-1)},className:"btn-lg btn-light bi bi-dash-circle-fill",disabled:1===i}),Object(f.jsx)("label",{className:"fs-3 mx-4 text-success",children:i}),Object(f.jsx)(b.a,{onClick:function(){return l(i+1)},className:"btn-lg btn-light btn-danger bi bi-plus-circle-fill",disabled:i>t-1}),Object(f.jsx)("div",{className:"text-center",children:Object(f.jsx)(b.a,{onClick:function(){s(i)},className:"btn-success",disabled:0===t,children:"Agregar al Carrito"})})]})},T=c(99),D=c(78);var F=function(e){var t=e.item,c=w().addItem,s=Object(a.useState)(!1),n=Object(j.a)(s,2),r=n[0],l=n[1];return Object(f.jsx)(d.a,{className:"p-2",children:Object(f.jsxs)(g.c,{direction:"up",dampimg:"3",triggerOnce:!0,children:[Object(f.jsx)("br",{}),Object(f.jsxs)(T.a,{className:"gx-5  shadow p-3 mb-5 bg-white rounded",children:[Object(f.jsx)(D.a,{children:Object(f.jsx)("img",{src:t.image,className:"containerImagenItem",loading:"lazy",alt:"Producto de Refugio Tienda Deco productos"})}),Object(f.jsx)(D.a,{children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("h3",{children:t.name}),Object(f.jsx)("h5",{children:t.description}),Object(f.jsxs)("h3",{children:["$ ",t.price]}),r?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)(b.a,{as:i.b,to:"/cart",variant:"secondary",children:"Terminar Compra"}),Object(f.jsx)("br",{})]}):Object(f.jsx)(q,{stock:t.stock,initial:1,onAdd:function(e){c({item:t,quantity:e}),l(!0)}}),Object(f.jsx)("br",{}),Object(f.jsxs)("button",{type:"button",className:"btn btn-outline-dark btn-sm m-1",disabled:!0,children:[t.stock," cantidades disponibles"]}),Object(f.jsx)("br",{}),Object(f.jsx)(i.b,{to:"/category/todos",children:Object(f.jsx)("button",{className:"btn btn-outline-success btn-sm m-1",children:"Volver"})}),Object(f.jsx)("h6",{children:"Medios de Pago:"}),Object(f.jsx)("img",{src:"/assets/mediosPago/mediosPago.png",alt:"distintos medios de pago",className:"w-75"})]})})]})]})})};var R=function(){var e=Object(l.f)().itemId,t=Object(a.useState)([]),c=Object(j.a)(t,2),s=c[0],n=c[1],r=Object(a.useState)(!0),i=Object(j.a)(r,2),u=i[0],O=i[1];return Object(a.useEffect)((function(){x().collection("items").doc(e).get().then((function(e){return n(Object(o.a)({id:e.id},e.data()))})).catch((function(e){return alert("UPSSS Error: ".concat(e))})).finally((function(){return O(!1)}))}),[e]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),u?Object(f.jsx)(d.a,{children:Object(f.jsxs)(b.a,{className:"m-5",variant:"success",disabled:!0,children:[Object(f.jsx)(m.a,{as:"span",animation:"border",size:"lg",role:"status","aria-hidden":"true"}),"L O A D I N G ..."]})}):Object(f.jsx)(F,{item:s})]})};var B=function(e){var t=e.greeting;return Object(f.jsx)("div",{children:Object(f.jsx)(d.a,{children:Object(f.jsxs)(g.d,{cascade:!0,delay:100,damping:"1",children:[Object(f.jsx)("h2",{className:"text-center mt-5 pt-4",children:t}),Object(f.jsx)("img",{src:"assets/img/productos.png",className:"container pt-5",alt:"Refugio Tienda Deco productos"}),Object(f.jsx)("h2",{className:"text-center p-3",children:"Objetos de Dise\xf1o para tu casa"}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{})]})})})},z=c(9),E=c(103);var G=function(e){var t=e.modalShow,c=w(),a=c.cartList,s=c.itemsCart,n=c.totalCart,r=c.clearItem,l=c.clearCart;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(g.b,{dampimg:"2",children:0===s()?Object(f.jsxs)(d.a,{children:[Object(f.jsxs)(g.a,{effect:"shake",triggerOnce:"true",delay:2300,children:[Object(f.jsx)("br",{}),Object(f.jsx)("h1",{className:"mt-4 text-danger",children:"El carrito est\xe1 vac\xedo..."}),Object(f.jsx)(b.a,{as:i.b,to:"/category/todos",variant:"danger",className:"mx-2",children:"Hac\xe9 tu COMPRA!!!"})]}),Object(f.jsxs)(g.c,{damping:"0",triggerOnce:!0,children:[Object(f.jsx)("br",{}),Object(f.jsx)("video",{loop:!0,autoPlay:!0,children:Object(f.jsx)("source",{src:"/assets/videos/carritoVacio.mp4",type:"video/mp4",alt:"Marketing illustrations by Storyset",loading:"lazy"})}),Object(f.jsx)("br",{})]})]}):Object(f.jsxs)(d.a,{children:[Object(f.jsx)("h1",{className:"mt-5 p-1",children:"Carrito de compras"}),Object(f.jsxs)("table",{className:"table table-bordered table-primary text-center table-striped",children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{className:"fs-5 fw-bold",children:[Object(f.jsx)("th",{children:"Id."}),Object(f.jsx)("th",{children:"Cantidad"}),Object(f.jsx)("th",{children:"Descripci\xf3n"}),Object(f.jsx)("th",{children:"Precio Unit"}),Object(f.jsx)("th",{children:"Subtotal"}),Object(f.jsx)("th",{children:"Eliminar"})]})}),Object(f.jsxs)("tbody",{children:[a.map((function(e){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:Object(f.jsx)("img",{src:e.image,alt:"Productos de Refugio Tienda Deco",className:"shadow-lg",style:{height:100}})}),Object(f.jsx)("td",{className:"align-middle",children:e.quantity}),Object(f.jsx)("td",{className:"align-middle",children:e.name}),Object(f.jsx)("td",{className:"align-middle",children:Intl.NumberFormat("es-AR",{currency:"ARS",style:"currency"}).format(e.price)}),Object(f.jsx)("td",{className:"align-middle",children:Intl.NumberFormat("es-AR",{currency:"ARS",style:"currency"}).format(e.quantity*e.price)}),Object(f.jsx)("td",{className:"bi bi-trash-fill align-middle fs-4",onClick:function(){return r(e.id)}})]},e.id)})),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{className:"fw-bold",children:"Cant.Unidades:"}),Object(f.jsx)("td",{className:"fw-bold",children:s()}),Object(f.jsx)("td",{}),Object(f.jsx)("td",{className:"fw-bold",children:"TOTAL COMPRA"}),Object(f.jsx)("td",{className:"fw-bold",children:Intl.NumberFormat("es-AR",{currency:"ARS",style:"currency"}).format(n())}),Object(f.jsx)("td",{})]})]})]}),Object(f.jsx)("br",{}),Object(f.jsx)(b.a,{as:i.b,to:"/category/todos",variant:"success",className:"mx-3",children:"Seguir comprando"}),Object(f.jsx)(b.a,{onClick:function(){t()},variant:"success",className:"mx-3",children:"Finalizar compra"}),Object(f.jsx)(b.a,{onClick:function(){l()},variant:"success",className:"mx-3",children:"Vaciar carrito"}),Object(f.jsx)("br",{}),Object(f.jsx)("h6",{className:"mt-3",children:"Medios de Pago:"}),Object(f.jsx)("img",{src:"/assets/mediosPago/mediosPago.png",alt:"distintos medios de pago",className:"w-50",loading:"lazy"})]})})})},L=c(101);var M=function(e){var t=e.formData,c=e.handleSubmit,a=e.handleChange;return Object(f.jsxs)("form",{onSubmit:c,onChange:a,children:[Object(f.jsxs)(L.a.Group,{as:T.a,className:"mb-3",children:[Object(f.jsx)(L.a.Label,{column:!0,sm:3,children:"Nombre"}),Object(f.jsx)(D.a,{sm:11,children:Object(f.jsx)(L.a.Control,{placeholder:"Nombre y Apellido",name:"name",required:!0,defaultValue:t.name})})]}),Object(f.jsxs)(L.a.Group,{as:T.a,className:"mb-3",children:[Object(f.jsx)(L.a.Label,{column:!0,sm:3,children:"Telefono"}),Object(f.jsx)(D.a,{sm:11,children:Object(f.jsx)(L.a.Control,{placeholder:"Telefono",name:"phone",required:!0,defaultValue:t.phone})})]}),Object(f.jsxs)(L.a.Group,{as:T.a,className:"mb-3",children:[Object(f.jsx)(L.a.Label,{column:!0,sm:3,children:"email"}),Object(f.jsx)(D.a,{sm:11,children:Object(f.jsx)(L.a.Control,{placeholder:"@email",name:"email",required:!0,defaultValue:t.email})})]}),Object(f.jsxs)(L.a.Group,{as:T.a,className:"mb-3",children:[Object(f.jsx)(L.a.Label,{column:!0,sm:3,children:"Reingresar"}),Object(f.jsx)(D.a,{sm:11,children:Object(f.jsx)(L.a.Control,{placeholder:"repetir email",name:"email2",required:!0,defaultValue:t.email2})})]}),""!==t.email&&t.email===t.email2?Object(f.jsx)(L.a.Group,{as:T.a,className:"mb-4 align-items-center",children:Object(f.jsx)(D.a,{sm:10,children:Object(f.jsx)(b.a,{type:"submit",variant:"success",children:"Generar Orden"})})}):Object(f.jsx)(f.Fragment,{})]})};var U=function(){var e=w(),t=e.cartList,c=e.totalCart,s=e.clearCart,n=Object(a.useState)(!1),r=Object(j.a)(n,2),l=r[0],d=r[1],m=Object(a.useState)(""),O=Object(j.a)(m,2),h=O[0],p=O[1],v=Object(a.useState)({name:"",phone:"",email:"",email2:""}),N=Object(j.a)(v,2),y=N[0],C=N[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(G,{modalShow:function(){return d(!0)}}),Object(f.jsxs)(E.a,{show:l,onHide:function(){return d(!1)},children:[Object(f.jsx)(E.a.Header,{closeButton:!0,className:"bg-success",children:Object(f.jsx)(E.a.Title,{className:"text-white",children:"Formulario de Compra"})}),Object(f.jsx)(E.a.Body,{children:Object(f.jsx)(M,{formData:y,handleSubmit:function(e){e.preventDefault(),function(){var e={};e.date=u.a.firestore.Timestamp.fromDate(new Date),e.buyer=y,e.total=c(),e.items=t.map((function(e){return{id:e.id,name:e.name,quantity:e.quantity,price:e.price}})),p("");var a=x();a.collection("orders").add(e).then((function(e){return p(e.id)})).catch((function(e){return alert("UPSSS Error: ".concat(e))})).finally((function(){return C({name:"",phone:"",email:"",email2:""})}));var s=a.collection("items").where(u.a.firestore.FieldPath.documentId(),"in",t.map((function(e){return e.id}))),n=a.batch();s.get().then((function(e){e.docs.forEach((function(e){n.update(e.ref,{stock:e.data().stock-t.find((function(t){return t.id===e.id})).quantity})})),n.commit().then((function(e){console.log("resultado batch:",e)}))}))}()},handleChange:function(e){C(Object(o.a)(Object(o.a)({},y),{},Object(z.a)({},e.target.name,e.target.value)))}})}),Object(f.jsx)(E.a.Footer,{children:""!==h&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(g.b,{left:!0,opposite:!0,cascade:!0,children:Object(f.jsx)(E.a.Body,{className:"bg-danger text-center text-white fw-normal",children:"Muchas GRACIAS por su Compra!!! Tome nota del N\xfamero de\n\t\t\t\t\t\t\t\t\t\t\tOrden: ".concat(h)})}),Object(f.jsx)(b.a,{as:i.b,to:"/",variant:"secondary",onClick:function(){d(!1),s()},children:"Close"})]})})]})]})};c(93);var V=function(){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{className:"appHeader p-5",children:Object(f.jsx)(I,{children:Object(f.jsxs)(i.a,{children:[Object(f.jsx)(P,{}),Object(f.jsxs)(l.c,{children:[Object(f.jsx)(l.a,{exact:!0,path:"/",children:Object(f.jsx)(B,{greeting:"Bienvenidos a REFUGIO - Tienda Deco"})}),Object(f.jsx)(l.a,{exact:!0,path:"/category/:categoryId",component:N}),Object(f.jsx)(l.a,{exact:!0,path:"/item/:itemId",component:R}),Object(f.jsx)(l.a,{exact:!0,path:"/cart",component:U})]})]})})})})};r.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(V,{})}),document.getElementById("root"))}},[[94,1,2]]]);
//# sourceMappingURL=main.c3b3d291.chunk.js.map